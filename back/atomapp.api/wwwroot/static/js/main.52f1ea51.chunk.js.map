{"version":3,"sources":["components/Menu/Menu.js","reducers/user.js","shared/Button/Button.js","components/Layout/LayoutHeader.js","components/Layout/LayoutSection.js","components/Layout/Layout.js","shared/consts.js","services/workplaces.js","reducers/data.js","pages/Inbox/Inbox.js","pages/Outbox/Outbox.js","components/Workplaces/WorkplacesItem.js","components/Table/Table.js","components/Workplaces/Workplaces.js","components/Authorization/Authorization.js","shared/helpers/createPathURL.js","components/Modal/Modal.js","components/CreateTask/RecordButton.js","services/voice.js","components/CreateTask/CreateTask.js","App.js","index.js"],"names":["Menu","className","to","SET_USER","state","action","type","user","setUser","localStorage","setItem","JSON","stringify","Button","props","onClick","children","small","light","buttonProps","classes","LayoutHeader","userId","useSelector","id","dispatch","useDispatch","LayoutSection","header","aside","menu","Layout","DEV_API","fetchWorkplaces","a","fetch","response","status","json","Error","fetchUsers","SET_WORK_PLACES","SET_USERS","initialState","workplaces","undefined","users","data","Inbox","Outbox","match","useRouteMatch","url","WorkplacesItem","name","useState","isExpanded","setExpanded","length","list","getWorkplaceUsers","map","item","Table","sizes","row","index","Object","values","cell","width","Workplaces","shallowEqual","button","handleClick","Authorization","useEffect","console","log","savedUser","getItem","parse","key","createPathURL","path","params","keys","forEach","toString","replacement","replace","substr","Modal","buttons","modal","startTime","RecordButton","isRecording","time","setTime","requestTime","Date","now","window","requestAnimationFrame","format","formData","FormData","append","method","headers","Accept","body","chunks","CreateTask","recorder","setRecorder","setRecording","navigator","mediaDevices","getUserMedia","audio","then","stream","MediaRecorder","addEventListener","event","push","audioBlob","Blob","uploadVoice","stop","start","App","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","combineReducers","dataReducer","userReducer","applyMiddleware","thunk","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.52f1ea51.chunk.js","sourcesContent":["import React from 'react'\nimport { NavLink } from 'react-router-dom'\nimport './menu.scss'\n\nconst Menu = function () {\n  return <div className='menu'>\n    <NavLink className='menu-link' to='/inbox'>\n      Входящие\n    </NavLink>\n    <NavLink className='menu-link' to='/outbox'>\n      Исходящие\n    </NavLink>\n  </div>\n}\n\nexport default Menu","const SET_USER = 'user/SET_USER'\n\nconst initialState = null\n\nexport default function (state = initialState, action) {\n  switch (action.type) {\n    case SET_USER:\n      return action.user || null\n    default:\n      return state\n  }\n}\n\nexport const setUser = function (user) {\n  localStorage.setItem('user', user ? JSON.stringify(user) : '')\n\n  return {\n    type: SET_USER,\n    user\n  }\n}\n","import React from 'react'\nimport { NavLink } from 'react-router-dom'\nimport classes from 'classnames'\nimport './button.scss'\n\nconst Button = function (props) {\n  const { onClick, children, small, light, to } = props \n  const buttonProps = {\n    onClick: onClick,\n    className: classes('button', small && '-small', light && '-light')\n  }\n  \n  return to \n    ? <NavLink\n      to={to}\n      {...buttonProps}\n    >\n      <span>{children}</span>\n    </NavLink>\n    : <button\n      type='button'\n      {...buttonProps}\n    >\n      <span>{children}</span>\n    </button>\n}\n\nexport default Button","import React from 'react'\nimport { useSelector, useDispatch } from 'react-redux'\nimport Menu from '../Menu'\nimport './layout.scss'\nimport { setUser } from '../../reducers/user'\nimport { Button } from '../../shared'\n\nconst LayoutHeader = function () {\n  const userId = useSelector(({ user }) => user && user.id)\n  const dispatch = useDispatch()\n  \n  const handleLogout = function () {\n    dispatch(setUser())\n  }\n\n  return <div className='layout-header'>\n    <div className='layout-title'>{\n      userId ? 'Задачи' : 'Авторизация' \n    }</div>\n    { userId && <Menu /> }\n    { userId && <Button onClick={handleLogout}>\n      Выйти\n    </Button>}\n  </div>  \n}\n\nexport default LayoutHeader","import React from 'react'\nimport classes from 'classnames'\nimport './layout.scss'\n\nconst LayoutSection = function (props) {\n  const { header, children, aside, menu } = props\n  return <div \n    className={ classes('layout-section', aside && '-aside', menu && '-menu')}\n  >\n    {header && <div className='layout-subheader'>\n      { header }\n    </div>}\n    <div className='layout-content'>\n      { children }\n    </div>\n  </div>\n}\n\nexport default LayoutSection","import React from 'react'\nimport LayoutHeader from './LayoutHeader'\nimport LayoutSection from './LayoutSection'\nimport './layout.scss'\n\nconst Layout = function (props) {\n  return <div className='layout'>\n    <LayoutHeader/>\n    {props.children}\n  </div>\n}\n\nexport default Layout","export const DEV_API = 'https://atomspeech.germanywestcentral.cloudapp.azure.com'","import { DEV_API } from '../shared/consts'\n\nexport async function fetchWorkplaces () {\n  const response = await fetch(`${DEV_API}/workplace`)\n  if (response.status === 200) {\n    return await response.json()\n  } else {\n    throw Error()\n  }\n}\n\nexport async function fetchUsers (id) {\n  const response = await fetch(`${DEV_API}/workplace/${id}/worker`)\n  if (response.status === 200) {\n    return await response.json()\n  } else {\n    throw Error()\n  }\n}","import { fetchUsers, fetchWorkplaces } from '../services/workplaces'\n\nconst SET_WORK_PLACES = 'data/SET_WORK_PLACES'\nconst SET_USERS = 'data/SET_USERS'\n\nconst initialState = {\n  workplaces: undefined,\n  users: undefined\n}\n\nexport default function (state = initialState, action) {\n  switch (action.type) {\n    case SET_WORK_PLACES:\n      return {\n        ...state,\n        workplaces: action.data\n      }\n    \n    case SET_USERS: \n      return {\n        ...state,\n        users: action.data\n      }\n      \n    default:\n      return state\n  }\n}\n\nexport const getWorkplaces = function () {\n  return async function (dispatch) {\n    try {\n      const data = await fetchWorkplaces()\n      console.log(data)\n      dispatch({\n        type: SET_WORK_PLACES,\n        data\n      })\n    }\n    catch (err) {\n      dispatch({\n        type: SET_WORK_PLACES,\n        data: null\n      })\n    }\n  }\n}\n\nexport const clearWorkplaceUsers = function () {\n  return {\n    type: SET_USERS,\n    data: undefined\n  }\n}\n\nexport const getWorkplaceUsers = function (id, name) {\n  return async function (dispatch) {\n    try {\n      const users = await fetchUsers(id)\n      dispatch({\n        type: SET_USERS,\n        data: {\n          list: users,\n          name\n        }\n      })\n    }\n\n    catch (err) {\n      dispatch({\n        type: SET_USERS,\n        data: null\n      })\n    }\n  }\n}","import React from 'react'\nimport LayoutSection from '../../components/Layout/LayoutSection'\n\nconst Inbox = function () {\n  return <>\n    <LayoutSection header={(\n      <strong>Мои задачи</strong>\n    )}>\n      <span>1</span>\n    </LayoutSection>\n    <LayoutSection aside header='Задача'>\n      <span>2</span>\n    </LayoutSection>\n  </>\n}\n\nexport default Inbox","import React from 'react'\nimport { useRouteMatch } from 'react-router-dom'\nimport LayoutSection from '../../components/Layout/LayoutSection'\nimport { Button } from '../../shared'\n\nconst Outbox = function () {\n  const match = useRouteMatch()\n  return <>\n    <LayoutSection header={(\n      <Button to={`${match.url}/@new-task`}>\n        Создать задачу\n      </Button>\n    )}>\n      <span>1</span>\n    </LayoutSection>\n    <LayoutSection aside header='Задача'>\n      <span>2</span>\n    </LayoutSection>\n  </>\n}\n\nexport default Outbox","import React, { useState } from 'react'\nimport { useDispatch } from 'react-redux'\nimport { clearWorkplaceUsers, getWorkplaceUsers } from '../../reducers/data'\nimport './workplaces.scss'\n\nconst WorkplacesItem = function (props) {\n  const { id, name, children } = props\n  const [isExpanded, setExpanded] = useState(false)\n  const dispatch = useDispatch()\n  \n  const handleClick = function () {\n    if (children && children.length > 0) {\n      setExpanded(!isExpanded)\n    } \n    dispatch(getWorkplaceUsers(id, name))\n  }\n\n  return <li>\n    {name && <button \n      type='button' \n      className='workplaces-link' \n      onClick={handleClick}\n    >\n      {name}\n    </button> }\n    {isExpanded && children && children.length > 0 && <ul>\n      { children.map(item => <WorkplacesItem key={item.id} {...item} />)}\n    </ul>}\n  </li>\n}\n\nexport default WorkplacesItem","import React from 'react'\nimport './table.scss'\n\nconst Table = function (props) {\n  const { data, sizes } = props\n  \n  if (!data) {\n    return null\n  }\n  \n  return <table className='table'>\n    <tbody>\n      {data.map((row, index) => <tr key={index}>\n        {Object.values(row).map((cell, index) => (\n          <td key={index} width={sizes && sizes[index]}>\n            {cell}\n          </td>\n        ))}\n      </tr>)}\n    </tbody>\n  </table>\n}\n\nexport default Table","import React from 'react'\nimport { useSelector, shallowEqual, useDispatch } from 'react-redux'\nimport LayoutSection from '../../components/Layout/LayoutSection'\nimport Table from '../../components/Table'\nimport { setUser } from '../../reducers/user'\nimport { Button } from '../../shared'\n\nconst Workplaces = function () {\n  const users = useSelector(({ data }) => data.users, shallowEqual)\n  const dispatch = useDispatch()\n  \n  const handleClick = function (user) {\n    dispatch(setUser(user))\n  }\n  \n  return <LayoutSection\n    header={users ? <span>{users.name}</span> : null}\n    width={80}\n  >\n    <Table \n      sizes={[\n        'auto',\n        '100%',\n        '100px'\n      ]}\n      data={users && users.list.map(user => ({\n        id: user.id,\n        name: user.name,\n        button: <Button to='/inbox' small light onClick={() => handleClick(user)}>\n          Залогиниться\n        </Button>\n      }))} \n    />\n  </LayoutSection>\n}\n\nexport default Workplaces","import React, { useEffect} from 'react'\nimport { shallowEqual, useDispatch, useSelector } from 'react-redux'\nimport { getWorkplaces } from '../../reducers/data'\nimport LayoutSection from '../../components/Layout/LayoutSection'\nimport WorkplacesItem from '../Workplaces/WorkplacesItem'\nimport Workplaces from '../Workplaces'\nimport { setUser } from '../../reducers/user'\n\nconst Authorization = function (props) {\n  const dispatch = useDispatch()\n  const workplaces = useSelector(({ data}) => data.workplaces, shallowEqual)\n  const userId = useSelector(({ user }) => user && user.id)\n\n  useEffect(function () {\n    dispatch(getWorkplaces())\n    const savedUser = localStorage.getItem('user')\n    if (savedUser) {\n      dispatch(setUser(JSON.parse(savedUser)))\n    }\n  }, [])\n  \n  return userId \n    ? props.children \n    : <>\n      <LayoutSection\n        menu\n        header={<span>Подразделения</span>}\n      >\n        <ul className='workplaces-tree'>\n          {workplaces && workplaces.map((item, key) => (\n            <WorkplacesItem key={item.id} {...item} />\n          ))}\n        </ul>\n      </LayoutSection>\n      <Workplaces />\n    </>\n}\n\nexport default Authorization","export const createPathURL = function (path, params) {\n  if (!params || !path) {\n    return ''\n  }\n\n  let url = path\n\n  Object.keys(params).forEach(function(key) {\n    if (key.toString() !== '0') {\n      const replacement = params[key] ? `${params[key]}` : ''\n      url = url\n        .replace(`:${key}?`, `:${key}`)\n        .replace(`/:${key}`, replacement ? `/${replacement}` : '')\n        .replace(`:${key}`, replacement)\n    } else {\n      url = url.replace('*', params[key])\n    }\n  })\n\n  return url.substr(-1) === '/'\n    ? url.substr(0, url.length - 1)\n    : url\n}","import React from 'react'\nimport { useRouteMatch } from 'react-router'\nimport { createPathURL } from '../../shared/helpers'\nimport { Button } from '../../shared'\nimport './modal.scss'\n\nconst Modal = function (props) {\n  const { buttons, children } = props \n  const match = useRouteMatch({ path: '*/:modal' })\n  console.log(match.params)\n  \n  return <div className='modal'>\n    <div className='modal-window'>\n      <div className='modal-content'>\n        {children}\n      </div>\n      <div className='modal-buttons'>\n        {buttons || null}\n        <Button light to={createPathURL(match.path, { ...match.params, modal: undefined})}>\n          Отмена\n        </Button>\n      </div>\n    </div>\n  </div>\n}\n\nexport default Modal","import React, { useState, useEffect } from 'react'\nimport { format } from 'date-fns'\nimport classes from 'classnames'\nimport './record.scss'\n\nlet startTime = 0\nconst RecordButton = function (props) {\n  const { isRecording, onClick } = props \n  const [ time, setTime ] = useState(0)\n  \n  const requestTime = function () {\n    const time = Date.now() - startTime\n    setTime(time)\n    isRecording && window.requestAnimationFrame(requestTime)\n  }\n  \n  const formatTime = function (time) {\n    \n  }\n  \n  useEffect(function () {\n    if (isRecording) {\n      startTime = Date.now()\n      window.requestAnimationFrame(requestTime)\n    }\n  }, [isRecording])\n  \n  return <button type='button' className='record' onClick={onClick}>\n      <span className={classes('record-button', isRecording && '-stop')} />\n      <span className='record-time'>\n        { isRecording ? format(new Date(time), 'hh:mm:ss') : <strong>Запись голоса</strong>}\n      </span>\n    </button>\n}\n\nexport default RecordButton","import { DEV_API } from '../shared/consts'\n\nexport async function uploadVoice (data) {\n  const formData = new FormData()\n  formData.append('filename', data)\n\n  const response = await fetch(`${DEV_API}/record/upload?isOpus=true`, {\n    method: 'POST',\n    headers: {\n      Accept: 'application/json',\n    },\n    body: formData\n  })\n  \n  if (response.status === 200) {\n    return await response.json()\n  } else {\n    throw Error()\n  }\n}","import React, { useState, useEffect } from 'react'\nimport Modal from '../Modal'\nimport { Button } from '../../shared'\nimport RecordButton from './RecordButton'\nimport { uploadVoice } from '../../services/voice'\nimport './create-task.scss'\n\nlet chunks = []\nconst CreateTask = function () {\n  const [ recorder, setRecorder ] = useState(null)\n  const [ isRecording, setRecording] = useState(false)\n\n  useEffect(function () {\n    navigator.mediaDevices.getUserMedia({ audio: true})\n      .then(stream => {\n        const recorder = new MediaRecorder(stream)\n        \n        recorder.addEventListener('dataavailable', function(event) {\n          chunks.push(event.data)\n        })\n        \n        recorder.addEventListener('stop', function () {\n          const audioBlob = new Blob(chunks, {\n            type: 'audio/mp3'\n          });\n          \n          console.log(uploadVoice(audioBlob))\n        })\n        \n        setRecorder(recorder)\n      })\n  }, [])\n  \n  const handleVoiceRecording = function () {\n    if (recorder) {\n      if (isRecording) {\n        recorder.stop()\n      } else {\n        chunks = []\n        recorder.start()\n      }\n      \n      setRecording(!isRecording)\n    }\n  }\n  \n\n  return <Modal>\n    <div className='create-task'>\n      { recorder && <RecordButton isRecording={isRecording} onClick={handleVoiceRecording} /> }\n    </div>\n  </Modal>\n}\n\nexport default CreateTask","import React from 'react'\nimport { createStore, applyMiddleware, combineReducers, compose } from 'redux'\nimport { BrowserRouter, Redirect, Route, Switch } from 'react-router-dom'\nimport { Provider } from 'react-redux'\nimport Layout from './components/Layout'\nimport dataReducer from './reducers/data'\nimport userReducer from './reducers/user'\nimport thunk from 'redux-thunk'\nimport Inbox from './pages/Inbox'\nimport Outbox from './pages/Outbox'\nimport Authorization from './components/Authorization'\nimport CreateTask from './components/CreateTask'\n\nfunction App() {\n  const composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n\n  const store = createStore(\n    combineReducers({\n      data: dataReducer,\n      user: userReducer\n    }),\n    composeEnhancers(applyMiddleware(thunk))\n  )\n  \n  return (\n    <Provider store={store}>\n      <BrowserRouter>\n        <Layout>\n         <Authorization>\n           <Switch>\n             <Route path='/inbox/:task?'>\n               <Inbox />\n             </Route>\n             <Route path='/outbox/:task?'>\n               <Outbox />\n             </Route>\n             <Redirect to='/inbox' />\n           </Switch>\n           <Route path='*/@new-task'>\n             <CreateTask />\n           </Route>\n         </Authorization>\n        </Layout>\n      </BrowserRouter>\n    </Provider>\n  );\n}\n\nexport default App;\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\nimport './index.css'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}