(this["webpackJsonpros-atom"]=this["webpackJsonpros-atom"]||[]).push([[0],{22:function(e,t,n){},38:function(e,t,n){},40:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n(0),a=n.n(r),s=n(18),i=n.n(s),o=n(14),u=n(11),l=n(3),j=n(5),d=(n(38),function(){return Object(c.jsxs)("div",{className:"menu",children:[Object(c.jsx)(u.b,{className:"menu-link",to:"/inbox",children:"\u0412\u0445\u043e\u0434\u044f\u0449\u0438\u0435"}),Object(c.jsx)(u.b,{className:"menu-link",to:"/outbox",children:"\u0418\u0441\u0445\u043e\u0434\u044f\u0449\u0438\u0435"})]})}),b=(n(22),"user/SET_USER"),h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:return t.user||null;default:return e}},O=function(e){return localStorage.setItem("user",e?JSON.stringify(e):""),{type:b,user:e}},p=n(4),x=n(16),f=n.n(x),m=(n(40),function(e){var t=e.onClick,n=e.children,r=e.small,a=e.light,s=e.to,i={onClick:t,className:f()("button",r&&"-small",a&&"-light")};return s?Object(c.jsx)(u.b,Object(p.a)(Object(p.a)({to:s},i),{},{children:Object(c.jsx)("span",{children:n})})):Object(c.jsx)("button",Object(p.a)(Object(p.a)({type:"button"},i),{},{children:Object(c.jsx)("span",{children:n})}))}),v=function(){var e=Object(j.d)((function(e){var t=e.user;return t&&t.id})),t=Object(j.c)();return Object(c.jsxs)("div",{className:"layout-header",children:[Object(c.jsx)("div",{className:"layout-title",children:e?"\u0417\u0430\u0434\u0430\u0447\u0438":"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f"}),e&&Object(c.jsx)(d,{}),e&&Object(c.jsx)(m,{onClick:function(){t(O())},children:"\u0412\u044b\u0439\u0442\u0438"})]})},w=function(e){var t=e.header,n=e.children,r=e.aside,a=e.menu;return Object(c.jsxs)("div",{className:f()("layout-section",r&&"-aside",a&&"-menu"),children:[t&&Object(c.jsx)("div",{className:"layout-subheader",children:t}),Object(c.jsx)("div",{className:"layout-content",children:n})]})},k=function(e){return Object(c.jsxs)("div",{className:"layout",children:[Object(c.jsx)(v,{}),e.children]})},g=n(9),y=n.n(g),N=n(12),E="https://atomspeech.germanywestcentral.cloudapp.azure.com";function S(){return _.apply(this,arguments)}function _(){return(_=Object(N.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(E,"/workplace"));case 2:if(200!==(t=e.sent).status){e.next=9;break}return e.next=6,t.json();case 6:return e.abrupt("return",e.sent);case 9:throw Error();case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(e){return D.apply(this,arguments)}function D(){return(D=Object(N.a)(y.a.mark((function e(t){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(E,"/workplace/").concat(t,"/worker"));case 2:if(200!==(n=e.sent).status){e.next=9;break}return e.next=6,n.json();case 6:return e.abrupt("return",e.sent);case 9:throw Error();case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var R="data/SET_WORK_PLACES",F="data/SET_USERS",T={workplaces:void 0,users:void 0},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R:return Object(p.a)(Object(p.a)({},e),{},{workplaces:t.data});case F:return Object(p.a)(Object(p.a)({},e),{},{users:t.data});default:return e}},I=n(28),J=function(){return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(w,{header:Object(c.jsx)("strong",{children:"\u041c\u043e\u0438 \u0437\u0430\u0434\u0430\u0447\u0438"}),children:Object(c.jsx)("span",{children:"1"})}),Object(c.jsx)(w,{aside:!0,header:"\u0417\u0430\u0434\u0430\u0447\u0430",children:Object(c.jsx)("span",{children:"2"})})]})},L=function(){var e=Object(l.g)();return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(w,{header:Object(c.jsx)(m,{to:"".concat(e.url,"/@new-task"),children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0437\u0430\u0434\u0430\u0447\u0443"}),children:Object(c.jsx)("span",{children:"1"})}),Object(c.jsx)(w,{aside:!0,header:"\u0417\u0430\u0434\u0430\u0447\u0430",children:Object(c.jsx)("span",{children:"2"})})]})},M=n(13),U=(n(42),function e(t){var n=t.id,a=t.name,s=t.children,i=Object(r.useState)(!1),o=Object(M.a)(i,2),u=o[0],l=o[1],d=Object(j.c)();return Object(c.jsxs)("li",{children:[a&&Object(c.jsx)("button",{type:"button",className:"workplaces-link",onClick:function(){s&&s.length>0&&l(!u),d(function(e,t){return function(){var n=Object(N.a)(y.a.mark((function n(c){var r;return y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,C(e);case 3:r=n.sent,c({type:F,data:{list:r,name:t}}),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),c({type:F,data:null});case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e){return n.apply(this,arguments)}}()}(n,a))},children:a}),u&&s&&s.length>0&&Object(c.jsx)("ul",{children:s.map((function(t){return Object(c.jsx)(e,Object(p.a)({},t),t.id)}))})]})}),z=(n(43),function(e){var t=e.data,n=e.sizes;return t?Object(c.jsx)("table",{className:"table",children:Object(c.jsx)("tbody",{children:t.map((function(e,t){return Object(c.jsx)("tr",{children:Object.values(e).map((function(e,t){return Object(c.jsx)("td",{width:n&&n[t],children:e},t)}))},t)}))})}):null}),P=function(){var e=Object(j.d)((function(e){return e.data.users}),j.b),t=Object(j.c)();return Object(c.jsx)(w,{header:e?Object(c.jsx)("span",{children:e.name}):null,width:80,children:Object(c.jsx)(z,{sizes:["auto","100%","100px"],data:e&&e.list.map((function(e){return{id:e.id,name:e.name,button:Object(c.jsx)(m,{to:"/inbox",small:!0,light:!0,onClick:function(){return function(e){t(O(e))}(e)},children:"\u0417\u0430\u043b\u043e\u0433\u0438\u043d\u0438\u0442\u044c\u0441\u044f"})}}))})})},q=function(e){var t=Object(j.c)(),n=Object(j.d)((function(e){return e.data.workplaces}),j.b),a=Object(j.d)((function(e){var t=e.user;return t&&t.id}));return Object(r.useEffect)((function(){t(function(){var e=Object(N.a)(y.a.mark((function e(t){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S();case 3:n=e.sent,console.log(n),t({type:R,data:n}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),t({type:R,data:null});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}());var e=localStorage.getItem("user");e&&t(O(JSON.parse(e)))}),[]),a?e.children:Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(w,{menu:!0,header:Object(c.jsx)("span",{children:"\u041f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f"}),children:Object(c.jsx)("ul",{className:"workplaces-tree",children:n&&n.map((function(e,t){return Object(c.jsx)(U,Object(p.a)({},e),e.id)}))})}),Object(c.jsx)(P,{})]})},B=function(e,t){if(!t||!e)return"";var n=e;return Object.keys(t).forEach((function(e){if("0"!==e.toString()){var c=t[e]?"".concat(t[e]):"";n=n.replace(":".concat(e,"?"),":".concat(e)).replace("/:".concat(e),c?"/".concat(c):"").replace(":".concat(e),c)}else n=n.replace("*",t[e])})),"/"===n.substr(-1)?n.substr(0,n.length-1):n},X=(n(44),function(e){var t=e.buttons,n=e.children,r=Object(l.g)({path:"*/:modal"});return console.log(r.params),Object(c.jsx)("div",{className:"modal",children:Object(c.jsxs)("div",{className:"modal-window",children:[Object(c.jsx)("div",{className:"modal-content",children:n}),Object(c.jsxs)("div",{className:"modal-buttons",children:[t||null,Object(c.jsx)(m,{light:!0,to:B(r.path,Object(p.a)(Object(p.a)({},r.params),{},{modal:void 0})),children:"\u041e\u0442\u043c\u0435\u043d\u0430"})]})]})})}),K=n(50),V=(n(45),0),W=function(e){var t=e.isRecording,n=e.onClick,a=Object(r.useState)(0),s=Object(M.a)(a,2),i=s[0],o=s[1],u=function e(){var n=Date.now()-V;o(n),t&&window.requestAnimationFrame(e)};return Object(r.useEffect)((function(){t&&(V=Date.now(),window.requestAnimationFrame(u))}),[t]),Object(c.jsxs)("button",{type:"button",className:"record",onClick:n,children:[Object(c.jsx)("span",{className:f()("record-button",t&&"-stop")}),Object(c.jsx)("span",{className:"record-time",children:t?Object(K.a)(new Date(i),"hh:mm:ss"):Object(c.jsx)("strong",{children:"\u0417\u0430\u043f\u0438\u0441\u044c \u0433\u043e\u043b\u043e\u0441\u0430"})})]})};function G(){return(G=Object(N.a)(y.a.mark((function e(t){var n,c;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("filename",t),e.next=4,fetch("".concat(E,"/record/upload?isOpus=true"),{method:"POST",headers:{Accept:"application/json"},body:n});case 4:if(200!==(c=e.sent).status){e.next=11;break}return e.next=8,c.json();case 8:return e.abrupt("return",e.sent);case 11:throw Error();case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}n(46);var H=[],Q=function(){var e=Object(r.useState)(null),t=Object(M.a)(e,2),n=t[0],a=t[1],s=Object(r.useState)(!1),i=Object(M.a)(s,2),o=i[0],u=i[1];Object(r.useEffect)((function(){navigator.mediaDevices.getUserMedia({audio:!0}).then((function(e){var t=new MediaRecorder(e);t.addEventListener("dataavailable",(function(e){H.push(e.data)})),t.addEventListener("stop",(function(){var e=new Blob(H,{type:"audio/mp3"});console.log(function(e){return G.apply(this,arguments)}(e))})),a(t)}))}),[]);return Object(c.jsx)(X,{children:Object(c.jsx)("div",{className:"create-task",children:n&&Object(c.jsx)(W,{isRecording:o,onClick:function(){n&&(o?n.stop():(H=[],n.start()),u(!o))}})})})};var Y=function(){var e=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||o.d,t=Object(o.e)(Object(o.c)({data:A,user:h}),e(Object(o.a)(I.a)));return Object(c.jsx)(j.a,{store:t,children:Object(c.jsx)(u.a,{children:Object(c.jsx)(k,{children:Object(c.jsxs)(q,{children:[Object(c.jsxs)(l.d,{children:[Object(c.jsx)(l.b,{path:"/inbox/:task?",children:Object(c.jsx)(J,{})}),Object(c.jsx)(l.b,{path:"/outbox/:task?",children:Object(c.jsx)(L,{})}),Object(c.jsx)(l.a,{to:"/inbox"})]}),Object(c.jsx)(l.b,{path:"*/@new-task",children:Object(c.jsx)(Q,{})})]})})})})};n(47);i.a.render(Object(c.jsx)(a.a.StrictMode,{children:Object(c.jsx)(Y,{})}),document.getElementById("root"))}},[[48,1,2]]]);
//# sourceMappingURL=main.52f1ea51.chunk.js.map